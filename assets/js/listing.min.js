const{__:__,_x:_x,_n:_n,_nx:_nx}=wp.i18n;jQuery("document").ready((function(e){e(".leads-listing").DataTable({dom:"Bfrtip",pageLength:20,lengthChange:!1,oLanguage:{sEmptyTable:__("You don't have any leads yet. Once you collect email leads, the data will appear in this table.","coupon-x")},buttons:[{extend:"csv",exportOptions:{columns:[1,2,3,4]}},{text:__("Delete","coupon-x"),attr:{id:"btn-delete"},action:function(t,a,o,c){if(0==e(".chk_lead:checked").length)alert(__("Please select at least one record","coupon-x"));else{let t=[];e("#lead-delete-confirm p").text(__("Are you sure you want to delete selected leads?","coupon-x")),e(".chk_lead:checked").each((function(){t.push(e(this).val())})),leads=t.join(","),e("#dashboard_lead_id").val(leads),l.dialog("open")}}}]}),e(".select-all").click((function(){e(this).is(":checked")?e(".chk_lead").prop("checked",!0):e(".chk_lead").prop("checked",!1)})),e(".chk_lead").click((function(){e(this).is(":checked")||e(".select-all").prop("checked",!1)}));let l=e("#lead-delete-confirm").dialog({resizable:!1,modal:!0,draggable:!1,height:"auto",width:400,overflow:"auto",autoOpen:!1,buttons:[{text:__("Cancel","coupon-x"),class:"btn btn-cancel",click:function(){e(this).dialog("close")}},{text:__("Delete Lead","coupon-x"),class:"btn btn-red",click:function(){url=cx_data.url,leads=e("#dashboard_lead_id").val();let l=[];e("#lead-delete-confirm p").text(__("Are you sure you want to delete selected leads?","coupon-x")),""!=leads&&(l=leads.split(",")),e("#loader").show(),e.ajax({url:url,data:{id:l,action:"delete_leads",nonce:e('input[name="cx_nonce"]').val()},type:"post",dataType:"json",success:function(l){console.log(l),ids=leads.split(","),e.each(ids,(function(l,t){e('.chk_lead[value="'+t+'"').closest("tr").hide()})),e("#loader").hide(),e("#wp_flash_message").removeClass("hide"),setTimeout((function(){e("#wp_flash_message").addClass("hide"),location.reload()}),2e3)}}),e(this).dialog("close")}}]});e("body").on("click",".ui-widget-overlay",(function(){console.log("called"),l.dialog("close")})),e(".close_flash_popup").click((function(){e("#wp_flash_message").addClass("hide")})),e(".delete-lead").click((function(t){t.preventDefault(),link=e(this).closest("tr"),e("#lead-delete-confirm p").text(__("Are you sure you want to delete this lead?","coupon-x"));let a=e(this).attr("lead-id");e("#dashboard_lead_id").val(a),l.dialog("open")}))}));
