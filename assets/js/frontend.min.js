function get_cookie(o){var e=o+"=",t="";return document.cookie.length>0&&(offset=document.cookie.indexOf(e),-1!=offset&&(offset+=e.length,end=document.cookie.indexOf(";",offset),-1==end&&(end=document.cookie.length),t=unescape(document.cookie.substring(offset,end)))),t}function getCookie(o){var e=document.cookie.match("(^|;) ?"+o+"=([^;]*)(;|$)");return e?e[2]:null}function setCookie(o,e,t){var a=new Date;a.setTime(a.getTime()+864e5*t),document.cookie=o+"="+e+";path=/;expires="+a.toGMTString()}function deleteCookie(o){setCookie(o,"",-1)}function launch_couponx(){jQuery(".tab-front-box").length&&(jQuery(".tab-front-box").hasClass("couponapp-open-state-click")&&jQuery(".tab-front-box.couponapp-open-state-click .tab-icon").trigger("click"),jQuery(".tab-front-box").hasClass("couponapp-open-state-hover")&&jQuery(".tab-front-box.couponapp-open-state-hover .tab-icon").trigger("mouseenter"),jQuery(".tab-front-box").hasClass("couponapp-open-state-open")&&jQuery(".tab-front-box.couponapp-open-state-open .tab-icon").trigger("click"))}function close_couponx(){jQuery(".tab-front-box").length&&jQuery(".tab-front-box .coupon-tab-close").trigger("click")}jQuery(document).ready((function(o){let e=0,t="",a=-1,n=function(o,e,t){if(t){let o=new Date;o.setTime(o.getTime()+24*t*60*60*1e3);o.toGMTString()}document.cookie=escape(o)+"="+escape(e)+"; path=/; SameSite=Lax"},c=function(o){let e=escape(o)+"=",t=document.cookie.split(";");for(let o=0;o<t.length;o++){let a=t[o];for(;" "==a.charAt(0);)a=a.substring(1,a.length);if(0==a.indexOf(e))return unescape(a.substring(e.length,a.length))}return null},p=function(e,t){url=cx_data.url,o.ajax({url:cx_data.url,data:{nonce:cx_data.nonce,id:e,key:t,action:"update_widget_stats"},type:"post",dataType:"json",success:function(o){console.log(o)}})},i=function(e){if(t=c("couponx_unique"+e),coupon_widget_id="tab-box-front-"+e,!(o("#"+coupon_widget_id+" .coupon-code-link").length>0&&2==o("#"+coupon_widget_id+" .coupon-code-link").attr("data-type"))){var a=o("#"+coupon_widget_id+' .coupon-code-email-text input[name="couponapp-email"]').length;if(null==t&&"1"!=a&&4!=o("#"+coupon_widget_id).data("type")){let t=cx_data.url;coupon_code=o(".cx-code").val(),o.ajax({url:t,data:{id:e,coupon_code:coupon_code,nonce:cx_data.nonce,action:"generate_coupon"},type:"post",dataType:"json",success:function(t){if(200==t.status){let a=t.code.code,c=(t.code.id,o(".cx-code").data("valid"));if(n("couponx_unique"+e,a,c),o("#"+coupon_widget_id+" .cx-code").length>0&&(o("#"+coupon_widget_id+" .cx-code").val(a),o("#"+coupon_widget_id+" .tab-box-couponcode-content .coupon-code-text").show()),o("#"+coupon_widget_id+" .code").length>0&&o("#"+coupon_widget_id+" .code").text(a),o("#copy-coupon-inputcode-"+e).length>0&&o("#copy-coupon-inputcode-"+e).val(a),o("#"+coupon_widget_id+" .coupon-code-link").length>0){href=o("#"+coupon_widget_id+" .coupon-code-link").attr("data-url");let e=href+a;o("#"+coupon_widget_id+" .coupon-code-link").attr("href",e)}}}})}else o("#"+coupon_widget_id+" .cx-code").length>0&&o("#"+coupon_widget_id+" .cx-code").val(t),o("#"+coupon_widget_id+" .code").length>0&&o("#"+coupon_widget_id+" .code").text(t),o("#copy-coupon-inputcode-"+e).length>0&&o("#copy-coupon-inputcode-"+e).val(t),o("#"+coupon_widget_id+" .coupon-code-link").length>0&&(href=o("#"+coupon_widget_id+" .coupon-code-link").attr("data-url"),type=o("#"+coupon_widget_id+" .coupon-code-link").attr("data-type"),1==type&&(link=href+t,o("#"+coupon_widget_id+" .coupon-code-link").attr("href",link)))}},s=function(o){localStorage.removeItem("is_updatevisitor"+o),localStorage.removeItem("is_updatecouponopen"+o),localStorage.removeItem("is_updatecouponcodeget"+o),localStorage.removeItem("couponapp_close"+o),localStorage.removeItem("couponapp_show"+o),localStorage.removeItem("couponapp_scroll"+o),localStorage.removeItem("couponapp_close_widget"+o),localStorage.removeItem("couponapp_tab_hide"+o),localStorage.removeItem("show_coupon_code"+o),localStorage.removeItem("couponapp_pending_message"+o),localStorage.removeItem("couponapp_open"+o),localStorage.removeItem("couponapp_animation"+o),localStorage.removeItem("couponapp_hide_cta_icon"+o),name="couponx_unique"+o,document.cookie=escape(name)+"=;expires=Thu, 01 Jan 1970 00:00:01 GMT;path=/; SameSite=Lax",name="couponx-exist-"+o,document.cookie=escape(name)+"=;expires=Thu, 01 Jan 1970 00:00:01 GMT;path=/; SameSite=Lax"},l=function(t){if(cookie_name="cx_logged_"+t,1!=get_cookie(cookie_name)&&"yes"==localStorage.getItem("is_updatevisitor"+t)&&s(t),container=o("#"+("tab-box-front-"+t)),2==container.attr("data-type")){let e=(new Date).getTime().toString().substring(4);code="COUPONX"+e+Math.random().toString().substring(2,3),console.log(code),o(".cx-code").val(code),o("#copy-coupon-inputcode-"+t).val(code),o(".code").text(code),console.log(o(".hide_coup_code").length),o(".hide_coup_code").length&&(o(".hide_coup_code").val(code),o(".coupon-email-button").attr("data-coupon-code",code)),o(".coupon-code-link").length&&"1"==o(".coupon-code-link").attr("data-type")&&(link=o(".coupon-code-link").attr("data-url")+code,o(".coupon-code-link").attr("href",link))}if(version=container.data("version"),widget_version=localStorage.getItem("version"+t),widget_version!=version&&s(t),""!=o(".cx-code").val()&&2!=container.attr("data-type")){let e=o(".cx-code").data("valid");n("couponx_unique"+t,o(".cx-code").val(),e)}localStorage.setItem("version"+t,version),container.hasClass("couponapp-open-always")&&localStorage.removeItem("couponapp_close"+t),container.hasClass("couponapp-open-state-open")&&null==localStorage.getItem("couponapp_close_widget"+t)&&(i(t),container.addClass("couonapp-active"),container.removeClass("hide"),localStorage.setItem("couponapp_open"+t,"yes"),container.find(".tab-box-wrap").removeClass("hide")),n("countsticky","dismiss",1);let l=container.data("isexit"),r=container.data("delay"),u=container.data("scroll"),d=c("couponx-exist-"+t);if(0!=r&&""!=r||""!=u||1!=l||null!=d||container.addClass("hide"),(0!=r&&""!=r||""!=u)&&"yes"!=localStorage.getItem("couponapp_show"+t)&&"yes"!=localStorage.getItem("couponapp_open"+t)||(container.removeClass("hide"),o(".tab-box-wrap").removeClass("hide")),parseInt(r)>0){delay=parseInt(r);let o=function(o){container.removeClass("hide"),container.find(".tab-box-wrap").removeClass("hide");container.find(".tab-box-email-content").outerWidth(),container.find(".coupon-button.coupon-email-button").outerWidth();localStorage.setItem("couponapp_show"+o,"yes")};setTimeout(o,1e3*delay,t,container)}""!=u&&function(e){o(window).scroll((function(){if(container=o("#tab-box-front-"+e),"0"!==container.data("scroll")){let t=o(document).height()-o(window).height(),n=o(window).scrollTop();if(0!=n){let o=n/t*100,c=parseInt(container.data("scroll")),p=localStorage.getItem("couponapp_show"+e);o>=c&&a!=e&&"yes"!=p&&(a=e,container.removeClass("hide"),container.find(".tab-box-wrap").removeClass("hide"),localStorage.setItem("couponapp_scroll"+e,"yes"),localStorage.setItem("couponapp_show"+e,"yes"))}}}))}(t),"yes"==localStorage.getItem("couponapp_tab_hide"+t)&&container.hasClass("couponapp-tab-hide")&&container.hide(),o(".tab-box.tab-front-box").each((function(){o(this).find(".tab-box-email-content").outerWidth(),o(this).find(".coupon-button.coupon-email-button").outerWidth()})),"yes"==localStorage.getItem("show_coupon_code"+t)&&(container.find(".tab-box-content.tab-box-email-content").remove(),container.addClass("open-coupon-code")),("yes"===localStorage.getItem("couponapp_pending_message"+t)||container.hasClass("couponapp-open-state-open"))&&container.find(".coupon-pending-message").remove(),container.hasClass("couponapp-open-state-open")&&(container.find(".tab-text").hide(),container.removeClass("hide"),container.find(".tab-box-wrap").removeClass("hide")),container.hasClass("couponapp-open-state-open")&&"yes"==localStorage.getItem("couponapp_close_widget"+t)&&container.hasClass("couponapp-open-always")&&container.find(".tab-text").show(),"yes"===localStorage.getItem("couponapp_open"+t)&&container.hasClass("couponapp-attention-once")&&container.hasClass("couponapp-open-state-open")&&(localStorage.setItem("couponapp_animation"+t,"yes"),container.removeClass((function(o,e){return(e.match(/(^|\s)couponapp-\S+-animation/g)||[]).join(" ")}))),"yes"===localStorage.getItem("couponapp_animation"+t)&&container.removeClass((function(o,e){return(e.match(/(^|\s)couponapp-\S+-animation/g)||[]).join(" ")})),!0===!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&container.removeClass("couponapp-open-state-hover").removeClass("couponapp-open-state-open").addClass("couponapp-open-state-click");let g=localStorage.getItem("is_updatevisitor"+t);0==e&&"yes"!=g&&(name="couponx_unique"+t,document.cookie=escape(name)+"=;expires=Thu, 01 Jan 1970 00:00:01 GMT;path=/; SameSite=Lax",p(t,"visitor"),e=1,localStorage.setItem("is_updatevisitor"+t,"yes"),document.cookie="cx_logged_"+t+"=1");let m=localStorage.getItem("is_updatecouponopen"+t);container.hasClass("couonapp-active")&&"yes"!=m&&(p(t,"widget_open"),localStorage.setItem("is_updatecouponopen"+t,"yes")),"close"===localStorage.getItem("couponapp_close"+t)&&container.find(".tab-text").hide(),container.hasClass("couponapp-hide-cta-icon")&&null==localStorage.getItem("couponapp_hide_cta_icon"+t)&&(container.addClass("couonapp-active"),container.removeClass("hide"),container.find(".tab-box-wrap").addClass("hide")),"yes"==localStorage.getItem("couponapp_hide_cta_icon"+t)&&container.hasClass("couponapp-hide-cta-icon")&&container.hide()};o(".tab-front-box").each((function(){let e=o(this).data("widgetid");l(e)}));o(document).on("click touch",".couponapp-open-state-click .tab-icon",(function(){let e=o(this).closest(".tab-box").attr("id");!function(e,t){if(container=o("#"+t),container.hasClass("couonapp-active"))return container.removeClass("couonapp-active"),localStorage.setItem("couponapp_pending_message"+e,"yes"),localStorage.setItem("couponapp_close_widget"+e,"yes"),void(container.hasClass("couponapp-open-always")&&container.find(".tab-text").show());i(e);let a=localStorage.getItem("is_updatecouponopen"+e);container.hasClass("couonapp-active")||"yes"==a||(p(e,"widget_open"),localStorage.setItem("is_updatecouponopen"+e,"yes")),container.addClass("couonapp-active"),container.hasClass("couponapp-attention-once")&&(localStorage.setItem("couponapp_animation"+e,"yes"),container.removeClass((function(o,e){return(e.match(/(^|\s)couponapp-\S+-animation/g)||[]).join(" ")}))),"close"===localStorage.getItem("couponapp_close"+e)&&container.find(".tab-text").hide(),container.hasClass("couponapp-open-first")&&(localStorage.setItem("couponapp_close"+e,"close"),container.find(".tab-text").hide()),localStorage.setItem("couponapp_open"+e,"yes"),o("#"+t).find(".coupon-pending-message").length>0&&(localStorage.setItem("couponapp_pending_message"+e,"yes"),container.find(".coupon-pending-message").remove())}(o("#"+e).data("widgetid"),e)})),o(document).on("click touch",".couponapp-open-state-hover-open .tab-icon",(function(){let e=o(this).closest(".tab-box").attr("id"),t=o("#"+e).data("widgetid");if(container=o("#"+e),container.hasClass("couonapp-active"))return container.removeClass("couonapp-active"),localStorage.setItem("couponapp_pending_message"+t,"yes"),container.removeClass("couponapp-open-state-hover-open"),container.addClass("couponapp-open-state-click"),void setTimeout((function(){container.addClass("couponapp-open-state-hover")}),100)})),o(document).on("mouseenter touch",".couponapp-open-state-hover .tab-icon",(function(){let e=o(this).closest(".tab-box").attr("id"),t=o("#"+e).data("widgetid");if(container=o("#"+e),i(t),container.hasClass("couonapp-active"))return;let a=localStorage.getItem("is_updatecouponopen"+t);o("#"+e).hasClass("couonapp-active")||"yes"==a||(p(t,"widget_open"),localStorage.setItem("is_updatecouponopen"+t,"yes")),container.hasClass("couponapp-attention-once")&&(localStorage.setItem("couponapp_animation"+t,"yes"),container.removeClass((function(o,e){return(e.match(/(^|\s)couponapp-\S+-animation/g)||[]).join(" ")}))),container.addClass("couonapp-active"),container.addClass("couponapp-open-state-click"),"close"===localStorage.getItem("couponapp_close"+t)&&container.find(".tab-text").hide(),container.hasClass("couponapp-open-first")&&(localStorage.setItem("couponapp_close"+t,"close"),container.find(".tab-text").hide()),localStorage.setItem("couponapp_open"+t,"yes"),container.find(".coupon-pending-message").length>0&&(localStorage.setItem("couponapp_pending_message"+t,"yes"),container.find(".coupon-pending-message").remove())})),o(document).on("click touch",".coupon-tab-close",(function(e){e.preventDefault();let t=o(this).closest(".tab-box").attr("id"),a=o("#"+t).data("widgetid");container=o("#"+t),container.removeClass("couonapp-active"),o(this).parent().attr("style",""),localStorage.setItem("couponapp_close_widget"+a,"yes"),container.hasClass("couponapp-open-state-hover-open")&&container.addClass("couponapp-open-state-hover").removeClass("couponapp-open-state-hover-open"),container.hasClass("couponapp-attention-once")&&(localStorage.setItem("couponapp_animation"+a,"yes"),container.removeClass((function(o,e){return(e.match(/(^|\s)couponapp-\S+-animation/g)||[]).join(" ")}))),localStorage.setItem("couponapp_open"+a,"yes"),container.hasClass("coupon-pending-message")&&(localStorage.setItem("couponapp_pending_message"+a,"yes"),container.find(".coupon-pending-message").remove()),container.hasClass("couponapp-open-always")&&container.find(".tab-text").show(),container.hasClass("couponapp-hide-cta-icon")&&localStorage.setItem("couponapp_hide_cta_icon"+a,"yes")})),o(document).on("click touch",".copy-to-clipboard",(function(e){e.preventDefault();let t=o(this).data("widget-id"),a=o("#copy-coupon-inputcode-"+t).val();var n=o("<input>");o("body").append(n),n.val(a).select(),document.execCommand("copy",!1,n.val()),n.remove(),o("#tab-box-front-"+t+" .coupon-code-text .label-tooltip").addClass("tooltip-show"),setTimeout((function(){o("#tab-box-front-"+t+" .coupon-code-text .label-tooltip").removeClass("tooltip-show")}),1e3);let c=localStorage.getItem("is_updatecouponcodeget"+t);if(o(this).hasClass("couoncode-copied")||"yes"==c||(p(t,"coupon"),localStorage.setItem("is_updatecouponcodeget"+t,"yes")),o(this).addClass("couoncode-copied"),void 0!==o("#tab-box-front-"+t).data("close-widget")){let e=o("#tab-box-front-"+t).data("close-widget");e=e.toString().replace(/'/g,""),e=1e3*parseInt(e);let a=function(e){o("#tab-box-front-"+e).removeClass("couonapp-active"),localStorage.setItem("couponapp_close_widget"+e,"yes")};setTimeout(a,e,t)}o("#tab-box-front-"+t).hasClass("couponapp-open-state-open")&&localStorage.setItem("couponapp_close_widget"+t,"yes"),o("#tab-box-front-"+t).hasClass("couponapp-tab-hide")&&localStorage.setItem("couponapp_tab_hide"+t,"yes")})),o(document).on("click touch",".coupon-code-link",(function(e){let t=o(this).data("widget-id"),a=o("#tab-box-front-"+t),n=localStorage.getItem("is_updatecouponcodeget"+t);if(o(this).hasClass("couoncode-copied")||"yes"==n||(p(t,"coupon"),localStorage.setItem("is_updatecouponcodeget"+t,"yes")),void 0!==a.data("close-widget")){let o=1e3*a.data("close-widget"),e=function(o){a.removeClass("couonapp-active"),localStorage.setItem("couponapp_close_widget"+o,"yes")};setTimeout(e,o,t)}return a.hasClass("couponapp-open-state-open")&&(localStorage.setItem("couponapp_close_widget"+t,"yes"),a.removeClass("couonapp-active")),a.hasClass("couponapp-tab-hide")&&localStorage.setItem("couponapp_tab_hide"+t,"yes"),!0})),o(document).on("click touch",".couponapp-open-state-open .tab-icon",(function(e){let t=o(this).closest(".tab-box").attr("id"),a=o("#"+t).data("widgetid");container=o("#"+t),container.hasClass("couonapp-active")?(container.removeClass("couonapp-active"),localStorage.setItem("couponapp_open_widget"+a,"yes"),localStorage.setItem("couponapp_pending_message"+a,"yes"),localStorage.setItem("couponapp_close_widget"+a,"yes"),o("#"+t+" .coupon-pending-message").remove(),container.hasClass("couponapp-open-always")&&o("#"+t+" .tab-text").show()):(i(a),container.addClass("couonapp-active"),localStorage.setItem("couponapp_open"+a,"yes"))})),o(document).on("click",".coupon-email-button",(function(e){let t=o(this).data("widget-id"),a="tab-box-front-"+t,c=o("#tab-box-front-"+t),p=c.find('.tab-box-email-content input[name="couponapp-email"]').val(),i=c.find('.tab-box-email-content input[name="couponapp-name"]').val(),s=o(this).data("coupon-code");var l=o("input[name='couponapp-name']").hasClass("required-name");""==i&&void 0!==l&&!1!==l?o(".required-text-msg").addClass("active"):o(".required-text-msg").removeClass("active");/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(p)||(p="");let r=o(this).data("consent-id"),u=o(this).data("consent");if(1==u&&0==o("#"+r).prop("checked")&&"required"==o("#"+r).attr("required"))return!0;if(""!=t&&""!=p&&(""!=i&&l||(""==i||""!=i)&&0==l)){e.preventDefault(),o(this).attr("disabled",!0),localStorage.setItem("couponapp_close_widget"+t,"yes");let c=cx_data.url;return o.ajax({url:c,data:{nonce:cx_data.nonce,email:p,customer_name:i,widget_id:t,coupon_code:""!=s?s:"",is_consent:0!=o("#"+r).length&&1==o("#"+r).prop("checked")?1:0,action:"capture_email"},type:"post",dataType:"json",success:function(e){if(o(this).attr("disabled",!1),401==e.status&&(o("#"+a+" .tab-box-email-content p.coupon-email-error").remove(),o("#"+a+" .tab-box-email-content .form-wrap").after('<p class="coupon-email-error">'+e.error+"</p>"),setTimeout((function(){o("#"+a+" .tab-box-email-content p.coupon-email-error").slideUp("slow")}),5e3)),!0===e.show_coupon){let c=e.discount_code;if(o("#"+a+" .cx-code").length>0&&o("#"+a+" .cx-code").val(c),o("#"+a+" .code").length>0&&o("#"+a+" .code").text(c),o("#copy-coupon-inputcode-"+t).length>0&&o("#copy-coupon-inputcode-"+t).val(c),o("#"+a+" .coupon-code-link").length>0&&2!=o("#"+a+" .coupon-code-link").attr("data-type")){href=o("#"+a+" .coupon-code-link").attr("data-url");let e=href+c;o("#"+a+" .coupon-code-link").attr("href",e)}let p=o(".cx-code").data("valid");n("couponx_unique"+t,c,p),o("#"+a+" .tab-box-email-content").fadeOut(100);let i=function(e){o("#"+e+" .tab-box-couponcode-content").fadeIn("slow")};setTimeout(i,200,a),o("#"+a).addClass("couponapp-email-coupon-code-show"),o("#"+a).find(".tab-box-couponcode-content").removeClass("hide"),localStorage.setItem("show_coupon_code"+t,"yes")}}}),!1}return 1==u&&0==o("#"+r).prop("checked")&&"required"==o("#"+r).attr("required")||""==p})),o(document).mouseleave((function(e){let t=e.clientY,a=document.body.clientWidth-e.pageX,p=o(window).height()-e.clientY;e.pageX;a>0&&p>0&&t<=0&&o(".tab-front-box").each((function(e,t){let a=o(this).data("isexit"),p=o(this).data("widgetid");var s=jQuery(this).attr("id");if("1"==a&&"yes"!==localStorage.getItem("couponapp_open"+p)){if(null==c("couponx-exist-"+p)){i(p),o(this).removeClass("hide"),o("#"+s+" .tab-box-wrap").removeClass("hide"),o(this).addClass("couonapp-active"),o(this).addClass("couponapp-open-state-click"),n("couponx-exist-"+p,"yes",1),o(this).find(".coupon-pending-message").length&&(localStorage.setItem("couponapp_pending_message"+p,"yes"),o(".coupon-pending-message").remove()),o(this).hasClass("couponapp-attention-once")&&(localStorage.setItem("couponapp_animation"+p,"yes"),o(this).removeClass((function(o,e){return(e.match(/(^|\s)couponapp-\S+-animation/g)||[]).join(" ")}))),"close"===localStorage.getItem("couponapp_close"+p)&&o("#"+s+" .tab-text").hide(),o(this).hasClass("couponapp-open-first")&&(localStorage.setItem("couponapp_close"+p,"close"),o("#"+s+" .tab-text").hide()),localStorage.setItem("couponapp_open"+p,"yes");o(this).find(".tab-box-email-content .form-wrap").outerWidth(),o(this).find(".coupon-button.coupon-email-button").outerWidth()}}}))})),o(".close-an").click((function(e){e.preventDefault(),o(".coupon-tab-close").trigger("click"),o(this).closest(".tab-box").find(".tab-box-wrap").addClass("hide"),widget_id=o(this).closest(".tab-box").data("widgetid"),localStorage.setItem("couponapp_tab_hide"+widget_id,"yes")})),o(".open-an").click((function(e){e.preventDefault(),link=o(this).attr("url"),o(this).hasClass("blank")?window.open(link,"_blank"):location.href=link}));var r=parseInt(o(".tab-front-box .tab-box-content").outerHeight());null==getCookie("coupon-box-height")&&setCookie("coupon-box-height",r,2)}));